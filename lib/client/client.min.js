(function(){var t;t=angular.module("node",["ui","ui.bootstrap"]),t.factory("node",function(t){var n;return n=function(){function n(){this.code="log 'Hello world'",this.logs="Connecting...\n",this.handleConnectionLost()}return n.prototype.updateAngularJs=function(){return!t.$$phase&&t.$apply()},n.prototype.handleConnectionLost=function(){var t=this;return this.list=null,this.active=null,this.online=!1,this.print("Trying to connect"),this.sock=new SockJS("/echo"),this.sock.onopen=function(){return t.initSock()},this.sock.onclose=function(){return t.handleConnectionLost()}},n.prototype.initSock=function(){var t=this;return this.online=!0,this.print("Connected to UnrealEngine3"),this.send({list:null}),this.sock.onmessage=function(n){var o,e,i;o=JSON.parse(n.data);for(e in o)switch(i=o[e],e){case"refresh":window.location.reload();break;case"log":t.print(i);break;case"code":case"title":case"active":case"list":t[e]=i;break;case"invalidated":t.send({list:null})}return t.updateAngularJs()}},n.prototype.refresh=function(){return window.location.refresh()},n.prototype.send=function(t){return this.sock.send(JSON.stringify(t))},n.prototype.load=function(t){return this.send({load:t})},n.prototype.discard=function(t){return this.send({discard:t})},n.prototype.save=function(){return this.send({save:{code:this.code,title:this.title}})},n.prototype.run=function(){return this.send({run:this.code})},n.prototype.print=function(t){return console.log(t),this.logs+=t+"\n",this.updateAngularJs()},n}(),new n}),t.controller("CodeCtrl",function(t,n){return t.server=n,t.status=function(){return n.online?"ONLINE":"OFFLINE"}})}).call(this);